# 简介
mTCP 是专门为 gap-proxy 设计的快速、可靠，加密安全、基于 UDP 的传输协议，借鉴了 KCP，TCP，Quic 的优点，技术特性：

* 支持连接迁移，在 IP 地址变化的情况下继续保持连接不断。
* 从协议头到应用数据都使用了 AES-256-CFB 加密。
* 类似 HMAC 机制，可防止数据被篡改。
* 选择确认，快速重传，快速超时选择重传。
* 简单的 KeepAlive，及时释放意外终止的连接。
* 简单快速的连接建立、连接释放。

mTCP 没有拥塞控制，只有流量控制。正因为如此，在高丢包率网络环境中，它才比使用了拥塞控制的 TCP 更快，即便是用了 BBR。

mTCP 的 RTO 不像 TCP 那样丢包就翻 2 倍，也不像 KCP 翻 1.5 倍，而是根本不翻倍。拥塞控制都去掉了，要流氓就要专注点。

# 协议
```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                              Hash                             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                         Connection ID                         +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Sequence Number                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Acknowledgment Number                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                             TsVal                             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                             TsEcr                             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                               |R|C|A|R|F|                     |
|             Window            |S|N|C|S|I|     Data Offset     |
|                               |V|T|K|T|N|                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                                                               |
+                            Payload                            +
|                (Up to 1420 bytes, SACK & Data)                |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```